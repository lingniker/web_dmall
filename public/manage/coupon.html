<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="myadmin/assets/css/bootstrap.css" rel="stylesheet" />
    <link href="myadmin/assets/css/font-awesome.css" rel="stylesheet" />
    <link href="myadmin/assets/js/morris/morris-0.4.3.min.css" rel="stylesheet" />
    <link href="myadmin/assets/css/custom-styles.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" rel="stylesheet" >
    <!-- <link href="../cdn/flatpickr.min.css" rel="stylesheet"> -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <!-- <script> src="../cdn/flatpickr.js"</script> -->
    <link href="myadmin/css/common.css" rel="stylesheet">
    <!-- <link href='http://fonts.useso.com/css?family=Open+Sans' rel='stylesheet' type='text/css' /> -->
    <title>Document</title>
</head>
<style>
    .data-title{
        height: 44px;
        margin-bottom: 20px;
        background: #fff;
    }
    .data-title p{
        padding:12px 0 0 12px;
    }
    .data-body{
        width: 100px;
        overflow: auto;
    }
    .body-left-ul li:hover{
        background: #575757;
        color: #F36A5A;  
    }
    .body-data-box{
        height: 120px;
        width: 100%;
        padding-right: 10px;
        background: white;
    }
    .row-box{
        padding:15px;
    }
    .body-data-num{
        padding: 0px;
    }
    .body-data-name{
        padding: 0px 0px 0px 20px;
        font-size: 16px;
        color: #AAB5BC;
        font-weight: 600;
        text-transform: uppercase;        
    }
    .body-data-num{
        padding: 30px 0px 0px 20px;
        font-size: 32px;
        font-weight: 600;
        color: #676767;
    }
    .user-manage li{
        height: 40px;
        line-height: 40px;
        padding: 5px 0px;
        margin: 20px 0px;     
    }
    .user-manage li input{
        width: 450px;
        margin-right: 20px;
        padding-left: 10px;
    }
    .add-user {
        height: 24px;
        position: relative;
        overflow: hidden;
        margin-top:40px;
        /* overflow:visible; */
    }
    #add-user-btn{
        display: inline-block;
        padding: 0 10px;
        width: 35px;
        height: 24px;
        margin-left: 20px;
    }
    .input-user{
        width: 450px;
        height: 30px;
        position: absolute;
        top: 30px;
    }
    .input-user input{
        width: 400px;
        height: 35px;
        padding-left: 10px;
    }
    .user-manage button{
        padding: 0px 10px;
        margin: 0px 2px;
    }
    .input-user button{
        height: 34px;
        margin: 0 2px;
        padding: 0 5px;
    }
    .page-ul li{
        float: left;
        /* width: 24px; */
        height: 24px;
        padding: 0px 6px;
        border: 1px solid gray;
        text-align: center;
        cursor: pointer;
    }
    .page-ul li:hover{
        background: #fff;
    }
    .mymodal{
        margin-top:50px;
    }
    .select-time-one{
        width:46%;
        margin-left:0px;
        float:left;
    }
    .select-time-two{
        width:44%;
        margin-left:280px;
    }
    .select-time{
        color:#337ab7;
    }
    .myhide{
        display:none;
    }
    .goods-li{
        width:45%;
        margin: 10px 10px 0 10px;
        height:30px;
        line-height: 30px;
        border:1px solid gray;
        overflow: hidden;
        padding: 0px 18px 0px 5px;
        border-radius: 4px;
        position: relative;
    }
    .goodsCheck{
        position:absolute;
        width: 10px;
        height: 30px;
        top:0px;
        right:10px;
    }
    .active{
        color:#F36A5A;
    }
    .mymodal{
        margin-top:50px;
    }

</style>
<body>
    <div class="admin-container">
        <div class="admin-nav">
            <div class="admin-nav-left">联家管理系统</div>
            <div class="admin-nav-right">
            <div class="back-login"><a href="#">退出登录</a></div>
            </div>
        </div>
        <div class="body">
            <div class="body-left">
                <ul class="body-left-ul">
                    <li><a href="./index.html">首页</a></li>
                    <li><a href="./control.html">控制面板</a></li>
                    <li><a href="./store.html">店铺管理</a></li>
                    <li><a href="./commodity.html">商品管理</a></li>
                    <li><a href="./order.html">订单详情</a></li>
                    <li><a href="./user.html">用户管理</a></li>
                    <li><a href="./address.html">地址管理</a></li>
                    <li><a href="./advertising.html">广告公告</a></li>
                    <li><a href="./classification.html">商品分类</a></li>
                    <li><a href="./store_manage.html">店长管理</a></li>
                    <li><a href="./courier.html">店员管理</a></li>
                    <li><a href="./integral.html">积分管理</a></li>
                    <li class="active"><a href="./coupon.html">优惠券管理</a></li>
                </ul>
            </div>
            <div class="body-right">
            <div class="body-right-title">优惠券管理</div>
            <div class="body-right-data">
                <div class="add-advertising" style="padding-bottom:30px;">
                        <!-- &%_%&powerDays_有效期:^:20&%_%&startDate_有效期开始时间:^:18&%_%&endDate_有效期结束时间:^:18 -->
                    <button type="button" class="btn btn-primary admin-btn" data-toggle="modal" data-target="#exampleModal" data-api="coupon/add?" data-whatever="增加商品" 
                    data-list="name_名称:^:水果蔬菜满20减50&%_%&type_类型:^:满减券5&%_%&catId_适用类型:^:67&%_%&executeLimit_满多少:^:200&%_%&limit_减多少:^:50&%_%&dateType_时间类型:^:-6&%_%&condition_使用条件介绍:^:-0">添加优惠券</button>
                    <button class="btn btn-primary findCouponUse-1">查看优惠券</button>
                    <button class="btn btn-primary findCouponUse-2">查询使用情况</button>               
                </div>
                <ul class="commodity-manage">
                        <table class="table table-hover myhide-1 myhide">
                            <tr><th>名称</th><th>类型</th><th>使用数</th><th>未使用</th><th>总数</th><th>查看</th></tr>
                            <tr><td>11</td><td>22</td><td>22</td><td>22</td><td>22</td><td><button class="findCouponUse1">查看</button></td></tr>
                            <tr><td>44</td><td>33</td><td>22</td><td>22</td><td>77</td><td><button>查看</button></td></tr>
                        </table>
                        <div class="panel-group myhide-2" id="accordion" role="tablist" aria-multiselectable="true">
                                <div class="panel panel-default">
                                  <div class="panel-heading" role="tab" id="headingOne1">
                                    <h4 class="panel-title">
                                      <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                          维生素红牛功能饮料250毫升                    
                                      </a>
                                      <button type="button" class="btn btn-primary admin-btn" data-toggle="modal" data-api="coupon/update?" data-target="#exampleModal" data-whatever="修改商品" 
                                      data-list="name_商品名称:^:红牛维生素供能饮料225ml0&%_%&cost_成本价:^:50&%_%&price_零售价:^:60&%_%&introduction_商品简介:^:红牛维生素供能饮料0&%_%&weight_重量:^:0.50&%_%&categoryId_商品分类ID:^:27&%_%&hot_热度:^:10&%_%&remarks_备注:^:-0&%_%&imagePath_图片:^:|*-*|9">修改商品</button>
                                      <button type="button" class="btn btn-primary admin-btn" data-toggle="modal" data-target="#exampleModal" data-whatever="删除商品" 
                                      data-list="name_商品名称:^:红牛维生素供能饮料225ml0">删除商品</button>             
                                    </h4>
                                    
                                  </div>
                                  <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
                                    <div class="panel-body">
                                            <ul class="list-group">
                                                    <li class="list-group-item">
                                                        <span>描述:</span>
                                                        <span class="store-num">维生素红牛功能饮料250毫升</span>
                                                        <button>修改</button>
                                                    </li>
                                                    <li class="list-group-item">
                                                        <span>上传人:</span>
                                                        <span>张三 </span>
                                                        <button>修改</button>
                                                    </li>
                                                    <li class="list-group-item">
                                                        <span>售价：</span>
                                                        <span>20元</span>
                                                        <button>修改</button>
                                                    </li>
                                                    <li class="list-group-item">
                                                        <span>分类：</span>
                                                        <span>饮料</span>
                                                        <button>修改</button>
                                                    </li>
                                                    <li class="list-group-item">
                                                        <span class="">图片路径</span>
                                                        <span class="">http://www.lianjianshangwu.com/images/1.png</span>
                                                        <button>修改</button>
                                                    </li>
                                            </ul>
                                    </div>
                                  </div>
                                </div>



                                <div class="panel panel-default">
                                        <div class="panel-heading" role="tab" id="headingTwo">
                                          <h4 class="panel-title store-panel">
                                            <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
                                                优质大米
                                            </a>
                                          </h4>
                                        </div>
                                        <div id="collapseTwo" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
                                          <div class="panel-body">
                                                <ul class="list-group">
                                                        <li class="list-group-item">
                                                            <span>描述:</span>
                                                            <span class="store-num"> 各种好品 全场9折 可享折上折</span>
                                                            <button>修改</button>
                                                        </li>
                                                        <li class="list-group-item">
                                                                <span>上传人:</span>
                                                                <span>张四 </span>
                                                                <button>修改</button>
                                                        </li>
                                                        <li class="list-group-item">
                                                            <span>截至时间：</span>
                                                            <span>2018.12.31/00：00：00</span>
                                                            <button>修改</button>
                                                        </li>
                                                        <li class="list-group-item">
                                                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
                                                                店铺商品
                                                            </a>
                                                            <button class="">增加商品</button>
                                                            <div id="collapseSix" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingSix">
                                                                <div class="panel-body">
                                                                    <ul class="list-group">
                                                                        <li class="list-group-item">
                                                                            <span>西红柿： </span>
                                                                            <span class="store-num">库存：50斤</span>
                                                                            <span class="float right"></span>
                                                                            <span class="right">售价：5元/斤</span>
                                                                        </li>
                                                                        <li class="list-group-item">
                                                                            <span>红牛维生素功能饮料250毫升  </span>
                                                                            <span class="store-num"> 库存：200瓶</span>
                                                                            <span class="float right"> </span>
                                                                            <span class="right">售价：6元每瓶</span>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </li>
    
                                                        <li class="list-group-item">
                                                            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven">
                                                                店铺店员
                                                            </a>
                                                            <button class="">增加店员</button>
                                                            <div id="collapseSeven" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingSeven">
                                                                <div class="panel-body">
                                                                        <ul class="list-group">
                                                                            <li class="list-group-item">
                                                                                <span>王六： </span>
                                                                                <span class="store-num">年龄：25岁</span>
                                                                                <span class="float right">职位：配送员</span>
                                                                                <span class="right">电话：1888888888888</span>
                                                                                <button>修改</button>
                                                                            </li>
                                                                            <li class="list-group-item">
                                                                                <span>李六： </span>
                                                                                <span class="store-num">年龄：25岁</span>
                                                                                <span class="float right">职位：收银员</span>
                                                                                <span class="right">电话：1888888888888</span>
                                                                                <button>修改</button>
                                                                            </li>
                                                                        </ul>
                                                                </div>
                                                            </div>
                                                        </li>                                                       
                                                </ul>
                                          </div>
                                        </div>
                                      </div>
                              </div>
                </ul>
                <!-- <div class="add-commodity">
                    <span style="font-size: 16px;">&nbsp;新增商品</span>
                    <button id="add-commodity-btn">+</button>
                    
                    <div class="input-commodity"><input type="text" placeholder="输入商品" /><button>提交</button></div>
                </div>  -->
            </div>
        </div>
        <div class="floor"></div>

        <!-- 公共模态框的弹出 -->
        <div class="modal fade mymodal" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="exampleModalLabel">消息</h4>
                </div>
                <div class="modal-body append-form">
                    <!-- <div class="form-group">
                        <label for="recipient-name" class="control-label">修改客户</label>
                        <input type="text" class="form-control" id="recipient-name">
                    </div>
    
                    <ul class="list-group">
                        <li class="list-group-item">
                            <div class="form-group">
                                <label for="index" class="control-label">姓名</label>
                                <input type="text" class="form-control" id="index">
                            </div>
                            <div class="form-group">
                                <label for="index1" class="control-label">手机号</label>
                                <input type="text" class="form-control" id="index1">
                            </div>
                        </li>
                    </ul> -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary" id="modal-commit">提交</button>
                </div>
                </div>
            </div>
        </div>


        <!-- 模态框弹出优惠券的使用情况 -->        
        <div class="modal fade bs-example-modal-lg couponModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
            <div class="modal-dialog modal-lg" role="document">          
                <div class="modal-content" style="padding:0 10px">
                    <h3>优惠券使用的详情</h3>
                    <hr>
                    <table class="table table-hover table-modal">
                        <tr><th>手机号</th><th>昵称</th><th>使用数</th><th>未使用</th></tr>
                        <tr><td>11</td><td>22</td><td>22</td><td>22</td></tr>
                        <tr><td>44</td><td>33</td><td>22</td><td>22</td></tr>
                    </table>       
                </div>
            </div>
        </div>


        <!-- 发放优惠券 -->
        <div class="modal fade bs-example-modal-lg couponModal1" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
            <div class="modal-dialog modal-lg" role="document">      
            <div class="modal-content" style="padding:0 10px">
            <h3>发放优惠券</h3>
            <hr>
                <button class="btn onSale active goodsOne" data-api="product/findOnSaleByStoreId?">发放优惠券</button>
                <button class="btn notSold goodsTwo" data-api="product/findNoSaleByStoreId?">单个发放优惠券</button>
                <div class="goodsBox" style="width:100%;padding-bottom:32px;height:auto;position:relative;">
                    <ul style="width:100%;display:flex;flex-wrap:wrap;" class="coupon-ul">
                            <li class="goods-li" >红牛维生素供能饮料225ml<div class="goodsCheck"><input type="checkbox"></div></li>
                            <li class="goods-li" >红牛维生素供能饮料225ml红牛维生素供能饮料225ml红牛维生素供能饮料225ml红牛维生素供能饮料225ml<div class="goodsCheck"><input type="checkbox"></div></li>
                            <li class="goods-li" >红牛维生素供能饮料225ml红牛维生素供能饮料225ml<div class="goodsCheck"><input type="checkbox"></div></li>
                            <li class="goods-li" >红牛维生素供能饮料225ml红牛维生素供能饮料225ml<div class="goodsCheck"><input type="checkbox"></div></li>
                            <li class="goods-li" >红牛维生素供能饮料225ml红牛维生素供能饮料225ml<div class="goodsCheck"><input type="checkbox"></div></li>
                            <li class="goods-li" >红牛维生素供能饮料225ml红牛维生素供能饮料225ml<div class="goodsCheck"><input type="checkbox"></div></li>
                            <li class="goods-li" >红牛维生素供能饮料225ml红牛维生素供能饮料225ml<div class="goodsCheck"><input type="checkbox"></div></li>
                    </ul>
                    <button class="btn btn-primary modifyCoupon" data-api="storeProduct/saveList?" style="position:absolute;bottom:4px;right:57px;">发给选中用户</button>
                </div>
            </div>
            </div>
        </div>



    </div>

    <script src="myadmin/assets/js/jquery-1.10.2.js"></script>
      <!-- Bootstrap Js -->
    <script src="myadmin/assets/js/bootstrap.min.js"></script>
    <!-- Metis Menu Js -->
    <script src="myadmin/assets/js/jquery.metisMenu.js"></script>
    <!-- Chart Js -->
    <!-- <script type="text/javascript" src="myadmin/assets/js/Chart.min.js"></script>  
    <script type="text/javascript" src="myadmin/assets/js/chartjs.js"></script>  -->
     <!-- Morris Chart Js -->
     <!-- <script src="myadmin/assets/js/morris/raphael-2.1.0.min.js"></script>
    <script src="myadmin/assets/js/morris/morris.js"></script> -->
      <!-- Custom Js -->
    <!-- <script src="myadmin/assets/js/custom-scripts.js"></script> -->
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>
    <script type="text/javascript" src="myadmin/js/config.js"></script>
    <!-- <script src="../cdn/jquery3.3.1.min.js"></script>
    <script src="../cdn/md5.min.js"></script> -->
    <script>
        var $_331 = jQuery.noConflict();
        console.log("url",url);
        var pageNum = 2;
        var pageSize = 10;
        (function(){
        //动态生成page页
        $('.page ul').append("<li><</li>");
        for(var i = 0; i<5;i++){
            $('.page ul').append("<li>"+i+"</li>");
        };
        $('.page ul').append("<li>></li>");
        $("#headingOne1").on("click",function(){
            $('#collapseOne').collapse('toggle');
        });
        $('.collapse').collapse();

        //发放购物券
        $('.modifyCoupon').on("click",function(){

            var userIds = [];
            for(let i = 0;i<$(this).parents().find('ul li input').length;i++){
                if($(this).parents().find('ul li input').eq(i).is(':checked')){
                    userIds.push($(this).parents().find('ul li input').eq(i).data("id"));
                };
            }
            console.log(userIds);
            if(userIds.length!=0){
                var obj = {};
                obj.userIds = userIds;
                obj.couponIds = sessionStorage.couponId;
                obj.access_token = sessionStorage.access_token;
                obj.timestamp = parseInt(new Date().getTime()/1000);
                obj.from = "web";

                var newobj = srotKeyObj(obj);
                var str = objmd5(newobj);

                var newUrl = url + "coupon/sendCoupon?" + str ;
                console.log(newUrl);
            }else{
                alert("请勾选下架的商品");
            }
            // var obj = {};
            // obj.couponIds = 1;
            // obj.userIds = [11,17,18];
            // obj.access_token = sessionStorage.access_token;
            // obj.timestamp = parseInt(new Date().getTime()/1000);
            // obj.from = "web";

            // var newobj = srotKeyObj(obj);
            // var str = objmd5(newobj);

            // var newUrl = url + "coupon/sendCoupon?" + str;
            console.log("+++++++",newUrl);

        });

        //查找所有的用户并将其展示在模态框上
        function getAllUser(){
            var obj = {};
            obj.access_token = sessionStorage.access_token;
            obj.pageNum  = 1;
            obj.pageSize = 10;
            obj.timestamp = parseInt(new Date().getTime()/1000);
            obj.from = "wed";
            var newobj = srotKeyObj(obj);
            var str = objmd5(newobj);
            var newUrl = url + "user/customerList?" + str;
            console.log("+++++++",newUrl);

            $.ajax({
                url:newUrl,
                type:'get',
                success:function(data){
                    console.log(data);
                    var userList = "";
                    for(var i = 0; i < data.data.list.length;i++){
                        
                        userList += '<li class="goods-li" >'+data.data.list[i].nickname+'<div class="goodsCheck"><input value="'+data.data.list[i].userId+'" data-id="'+data.data.list[i].userId+'" type="checkbox"></div></li>';
                    }
                    console.log(userList);
                    $(".coupon-ul").html(userList);

                    console.log("ok");
                },
                error:function(err){
                    console.log(err);
                    console.log("err");
                }
            });
        };
        

        //模态框的弹出
        $('#exampleModal').on('show.bs.modal',function(event){
            event.stopPropagation();
            // event.preventDefault();
            var button = $(event.relatedTarget);
            var recipient = button.data('whatever');
            var list = button.data('list');
            var a = list.split('&%_%&');
            // console.log(a);
            var obj = {};
            var arr = [];
            for(var i in a){
                // console.log(a[i]);
                arr[i] = [];
                arr[i][0] = a[i].split(":^:")[0];
                arr[i][1] = a[i].split(":^:")[1].substr(0,a[i].split(":^:")[1].length-1) == "|*-*|" ? "" : a[i].split(":^:")[1].substr(0,a[i].split(":^:")[1].length-1);
                arr[i][2] = a[i].split(":^:")[1].substr(a[i].split(":^:")[1].length-1,1);
            }
            // console.log(arr);
            
            //增加节点name_名字:0&%_%&age_年龄:1&%_%&phone_手机:2
            var appendNode = '<div class="form-group"><label for="recipient-name" class="control-label">内容'
            +'</label><input type="button" class="form-control" id="recipient-name" value="'+recipient
            +'" style="text-align:start"></div><ul class="list-group"><li class="list-group-item" id="modal-list">';
            
            for(var i = 0; i<arr.length ;i++){
                if(arr[i][2] == 9){
                    // console.log("添加图片");
                    appendNode +='<div class="form-group"><label for="exampleInputFile">选择图片</label><input id="img-input" type="file" filetype="image/*" name="'
                    +arr[i][0].split('_')[0]
                    +'"><p class="help-block"></p><button class="btn_img btn">点击上传</button></div>';
                }else if(arr[i][2] == 8){

                    appendNode +='<div class="form-group"><label for="'
                    +a[i].split(':^:')[0].split('_')[0]
                    +'" class="control-label">'
                    +a[i].split(':^:')[0].split('_')[1]
                    +'</label><input type="text" data-enable-time=true data-time_24hr=true  data-enable-seconds=true class="form-control flatpickr" id="index" name="'
                    +a[i].split(':^:')[0].split('_')[0]+'" data-default-date="'+arr[i][1]+' GMT"></div>';

                }else if(arr[i][2] == 7){

                        var data1 = {};
                        data1.access_token = sessionStorage.access_token;
                        data1.timestamp=parseInt(new Date().getTime()/1000);
                        data1.from="web";

                        var newObj = srotKeyObj(data1);
                        var str = objmd5(newObj);

                        // var newUrl = url + "category/add?" + str;
                        var newUrl = url + "category/find?" + str;
                        console.log(newUrl);

                        $.ajax({
                            url:newUrl,
                            type:"get",
                            dataType:"json",
                            async: false,
                            success:function(data,status){
                                if(data.code == 200){
                                    appendNode += '<div class="form-group select">适用类型</div><select id="okko" style="margin-bottom:10px;" class="form-control" name="catId"><option value="0">'+'通用'+'</option>';
                                    for(var i = 0 ; i<data.data.length ;i++){
                                         appendNode +=  '<option value="'+data.data[i].catId+'">'+data.data[i].catName+'</option>';
                                    }
                                    appendNode += '</select>';

                                }
                                console.log(data);
                            },
                            error:function(err){
                                console.log(err);
                            }
                        });

                }else if(arr[i][2] == 6){


                    appendNode += '<div class="" style="margin-bottom: 15px;height:130px;padding:10px 15px;border:1px solid #ddd;border-radius:5px;">'
                    +'<input type="button" class="form-control select-time-one select-time" id="index" name="'
                    +arr[i][0].split('_')[0]+
                    '" value="'
                    +'有效期'+
                    '"><input type="button" class="form-control select-time-two" id="index" name="'
                    +arr[i][0].split('_')[0]+
                    '" value="'
                    +'时间段'
                    +'">'

                    +'<div class="form-group time-one" style="padding-top:10px;display:block;"><label for="index11" class="control-label">'
                    +'有效期(/天)'
                    +'</label><input type="text" class="form-control" id="index11" name="powerDays" value="'
                    +arr[i][1]+
                    '"></div>'

                    +'<div class="time-two" style="padding-top:10px;display:none;">'
                    +'<div class="form-group" style="width:46%;float:left;"><label for="index12" class="control-label">'
                    +'优惠券开始时间'
                    +'</label>'
                    +'<input type="text" data-enable-time=true data-time_24hr=true  data-enable-seconds=true class="form-control flatpickr" id="index12" name="startDate">'
                    +'</div>'

                    +'<div class="form-group" style="width:44%;float:right;"><label for="index13" class="control-label">'
                    +'优惠券结束时间'
                    +'</label>'
                    +'<input type="text" data-enable-time=true data-time_24hr=true  data-enable-seconds=true class="form-control flatpickr" id="index13" name="endDate" >'
                    +'</div>'
                    +'</div>'
                    +'</div>';        

                }else if(arr[i][2] == 5){
                    appendNode += '<div class="form-group select1">券类型</div><select id="okko1" style="margin-bottom:10px;" class="form-control" name="catId">';
                    appendNode +=  '<option value="满减券">满减券</option>';
                    appendNode +=  '<option value="新用户券">新用户券</option>';
                    appendNode += '</select>';         

                }else{
                    appendNode += '<div class="form-group"><label for="'
                    +arr[i][0].split('_')[0]+'" class="control-label">'
                    +arr[i][0].split('_')[1]
                    +'</label><input type="text" class="form-control" id="index" name="'
                    +arr[i][0].split('_')[0]+
                    '" value="'
                    +arr[i][1]+
                    '"></div>';
                };
            }
            appendNode += '</li></ul>';
            $(".append-form").html(appendNode);
            document.getElementsByClassName("flatpickr").flatpickr();
            var modal = $(this);
            modal.find('.modal-title').text("管理");
            console.log(button.data("api"));
            $("#modal-commit").data("api",button.data("api"));
            // modal.find('.modal-body input').val(recipient);
        });


        //模态框内容的提交
        $("#modal-commit").on('click',function(event){

            var api =  $(this).data("api");
            console.log(api);
            event.preventDefault();
            var data = {};


            if(api == "coupon/add?"){//增加优惠券

                for(var i=0; i<$("#modal-list .form-group").length;i++){
                        if($("#modal-list .form-group").eq(i).hasClass('select')){
                            data.catId = $("#okko").val();
                        }else if($("#modal-list .form-group").eq(i).hasClass('select1')){
                            data.type = $("#okko1").val();
                        }else if($("#modal-list .form-group").eq(i).find("input").attr("type")=="file"){
                            alert("请先上传图片");
                            return;
                        }else{
                            data[$("#modal-list .form-group").eq(i).find("input").attr("name")]= $("#modal-list .form-group").eq(i).find('input').val();  
                        }
                };
                console.log(data);
                var numReg = /^[0-9]+.?[0-9]*$/;;
                if(data.name !== "" && data.name.length < 150){
                    if(numReg.test(data.executeLimit)){
                        if(numReg.test(data.limit)){
                            if(data.condition.length <= 200  && data.condition.length > 0){
                                if($(".select-time-one").hasClass("select-time")){//优惠券时间的类型选择 为有效期
                                    data.time_type = 0;
                                    if(data.powerDays==""){
                                        alert("有效期请输入数据");
                                        return;
                                    }else{
                                        console.log("data");
                                        delete data.startDate;
                                        delete data.endDate;

                                        console.log("this is file",data);
                                        data.access_token = sessionStorage.access_token;
                                        data.form = "web";
                                        data.timestamp = parseInt(new Date().getTime()/1000);


                                        var newObj = srotKeyObj(data);
                                        var str = objmd5(newObj);

                                        var newUrl = url + "coupon/add?" + str;
                                        console.log(newUrl);
                                        alert(newUrl);
                                        
                                        $.ajax({
                                            url:newUrl,
                                            type:'get',
                                            success:function(data){
                                                console.log(data);
                                                console.log("ok");
                                                $('.modal').modal('hide');
                                                alert("优惠券添加成功");
                                            },
                                            error:function(err){
                                                console.log(err);
                                                console.log("err");
                                                alert("优惠券添加失败");
                                            }
                                        });
                                    }
                                }else if($(".select-time-two").hasClass("select-time")){//优惠券时间的类型选择 为时间段
                                    if(data.startDate == ""){
                                        alert("请输入开始时间");
                                        return;
                                    };
                                    if(data.endDate == ""){
                                        alert("请输入结束时间");
                                        return;
                                    };
                                    console.log((new Date(data.endDate).getTime()-new Date(data.startDate).getTime()));
                                    if(((new Date(data.endDate).getTime()-new Date(data.startDate).getTime())/1000/60/60/24 > 49) || ((new Date(data.endDate).getTime()-new Date(data.startDate).getTime()) < 0)){
                                        console.log("输入的时间不要跨度太大");
                                        return;
                                    }
                                    delete data.powerDays;
                                    data.time_type = 1;

                                    console.log("data");

                                    console.log("this is file",data);
                                    data.access_token = sessionStorage.access_token;
                                    data.form = "web";
                                    data.timestamp = parseInt(new Date().getTime()/1000);


                                    var newObj = srotKeyObj(data);
                                    var str = objmd5(newObj);

                                    var newUrl = url + "coupon/add?" + str;
                                    console.log(newUrl);
                                    alert(newUrl);
                                    
                                    $.ajax({
                                        url:newUrl,
                                        type:'get',
                                        success:function(data){
                                            console.log(data);
                                            console.log("ok");
                                            $('.modal').modal('hide');
                                            alert("优惠券添加成功");
                                        },
                                        error:function(err){
                                            console.log(err);
                                            console.log("err");
                                            console.log("优惠券添加失败");
                                        }
                                    });
                                };

                            }else{
                                alert("请输入条件介绍");
                            }
                        }else{
                            alert("'减多少'请输入正确的数字");
                        }           
                    }else{
                        alert("'满多少'请输入正确的数字");
                    }

                }else{
                    alert("输入的名称不能为空");
                }

            }else if(api == "coupon/update?"){//修改优惠券

                for(var i=0; i<$("#modal-list .form-group").length;i++){
                        if($("#modal-list .form-group").eq(i).hasClass('select')){
                            data.catId = $("#okko").val();
                        }else  if($("#modal-list .form-group").eq(i).find("input").attr("type")=="file"){
                            alert("请先上传图片");
                            return;
                        }else{
                            if($("#modal-list input").eq(i).val() == ""){
                                alert("参数不能为空");
                                return;
                            }else{
                                data[$("#modal-list .form-group").eq(i).find("input").attr("name")]= $("#modal-list .form-group").eq(i).find('input').val();
                            }
                            
                        }
                };
                console.log("this is file",data);
                data.access_token = sessionStorage.access_token;
                data.form = "web";
                data.timestamp = parseInt(new Date().getTime()/1000);


                var newObj = srotKeyObj(data);
                var str = objmd5(newObj);

                var newUrl = url + "coupon/update?" + str;
                console.log(newUrl);
                // alert(newUrl);
                
                $.ajax({
                    url:newUrl,
                    type:'get',
                    success:function(data){
                        console.log(data);
                        console.log("ok");
                        $('.modal').modal('hide');
                        alert("提交成功");
                    },
                    error:function(err){
                        console.log(err);
                        console.log("err");
                        alert("提交失败");
                    }
                });

            }
            // console.log($("#modal-list input").length);
            
        });



        //查看用户使用详情
        $(document).on('click',".findCouponUse1",function(e){
            // console.log("nihao");
            $(".couponModal").modal("show");
            console.log($(this).data("catId"));
            console.log($(this).data("name"));
            console.log($(this).data("type"));

            var obj = {};
            obj.catId = $(this).data("catId");
            obj.name = $(this).data("name");
            obj.type = $(this).data("type");
            obj.access_token = sessionStorage.access_token;
            obj.timestamp = parseInt(new Date().getTime()/1000);
            obj.form = "web";

            var newobj = srotKeyObj(obj);
            var str = objmd5(newobj);

            var newUrl = url + "coupon/findUserByCoupon?" + str ;
            console.log(newUrl);

            $.ajax({
                url:newUrl,
                type:"get",
                dataType:"json",
                success:function(data){
                    // {"userId":18,"phone":"15010582681","nickName":"6666","couponAmount":1,"usedNumber":0,"unusedNumber":1},{"userId":21,"phone":"18515430786","nickName":"反抗军的数据库","couponAmount":1,"usedNumber":0,"unusedNumber":1}]        
                    // console.log("就是这里");
                    console.log(data);
                    var userUseCoupon = "";
                    userUseCoupon += '<tr><th>手机号</th><th>昵称</th><th>使用数</th><th>未使用</th></tr>';
                    for(var i = 0 ; i< data.data.length;i++){
                        userUseCoupon += '<tr><td>'+data.data[i].phone+'</td><td>'+data.data[i].nickName+'</td><td>'+data.data[i].usedNumber+'</td><td>'+data.data[i].unusedNumber+'</td></tr>';                    
                    }

                    $(".table-modal").html(userUseCoupon);
                },
                error:function(err){
                    console.log(err);
                }
            });
        });


        
        //查询优惠券使用的情况
        function findCouponUse(){
            var obj = {};

            obj.access_token = sessionStorage.access_token;
            obj.timestamp = parseInt(new Date().getTime()/1000);
            obj.form = "web";

            var newobj = srotKeyObj(obj);
            var str = objmd5(newobj);

            var newUrl = url + "coupon/findCoupon?" + str ;
            console.log(newUrl);
            $.ajax({
                url:newUrl,
                type:"get",
                dataType:"json",
                success:function(data){
                    // console.log("就是这里");
                    console.log(data);
                    var table_list = "";
                    table_list += '<tr><th>名称</th><th>类型</th><th>使用数</th><th>未使用</th><th>总数</th><th>查看</th></tr>';                    
                    for(var i = 0;i<data.data.length;i++){
                        table_list += '<tr><td>'+data.data[i].name+'</td><td>满减</td><td>'
                        +data.data[i].usedNumber+'</td><td>'+data.data[i].unusedNumber+'</td><td>'
                        +data.data[i].userAmount+'</td><td><button data-name="'
                        +data.data[i].name+'" data-type="'
                        +data.data[i].type+'" data-cat-id="'+data.data[i].catId+'" class="findCouponUse1">查看</button></td></tr>'
                    };
                    $(".myhide-1").html(table_list);
                },
                error:function(err){
                    console.log(err);
                }
            });
        }
        findCouponUse();

        
        $(document).on('click','.btn_img',function(){//上传图片
                if($("#img-input")[0].files[0]){
                var reg = /image\/*/;
                var bloe = reg.test($("#img-input")[0].files[0].type);
                if(bloe){
                    var obj = {};
                    obj.access_token = sessionStorage.access_token;
                    obj.timestamp = parseInt(new Date().getTime()/1000);
                    obj.form = "web";

                    var newobj = srotKeyObj(obj);
                    var str = objmd5(newobj);

                    var arr = str.split("&");

                    var formData = new FormData();
                    for(var i = 0;i<arr.length;i++){
                        formData.append(arr[i].split("=")[0],arr[i].split("=")[1]);
                    };
                    formData.append('file', $("#img-input")[0].files[0]);  /*获取上传的图片对象*/
                    $_331.ajax({
                          url: url+'attachment/upload?',
                          type: 'POST',
                          data: formData,
                          contentType: false,
                          processData: false,
                          success:function(data){
                              console.log(data);  /*服务器端的图片地址*/
                              var str = data.data;
                              var node = '<label for="imagePath" class="control-label">图片路径</label><input type="text" disabled class="form-control" id="imagePath"  name="imagePath" value="'
                              +str+
                              '">';
                              $('.btn_img').parent().html(node);
                              console.log("ok");
                        },
                        error:function(err){
                            console.log(err);
                            console.log("err");
                        }
                  });

                }else{
                    alert("请选择图片");
                }
            }else{
                alert("请选择图片");
            }
            // var str = "http://140.143.25.27:8080/attachment/view/49";
            // var node = '<label for="imagePath select" class="control-label">图片路径</label><input type="text" class="form-control" id="imagePath"  name="imagePath" value="'
            //            +str+
            //            '">';
            //  $('.btn_img').parent().html(node);
           

        });


        //查询优惠券
        function findCoupon(){
            var obj = {};

            obj.access_token = sessionStorage.access_token;
            obj.timestamp = parseInt(new Date().getTime()/1000);
            obj.form = "web";

            var newobj = srotKeyObj(obj);
            var str = objmd5(newobj);

            var newUrl = url + "coupon/getAllCoupon?" + str ;
            console.log(newUrl);


            $.ajax({
                url:newUrl,
                type:"get",
                dataType:"json",
                success:function(data){
                    console.log("ok");
                    console.log(data);

                    //     var data ={
                    //     "code": 200,
                    //     "message": "请求成功",
                    //     "data": [
                    //                 {
                    //                 "id": 123,
                    //                 "type": "新用户劵",
                    //                 "name": "首次下单立减",
                    //                 "cat_id": null,
                    //                 "limit": 10.00,
                    //                 "power_days": null,
                    //                 "start_date": "2018-05-01 00:00:00",
                    //                 "end_date": "2118-05-01 00:00:00",
                    //                 "condition": "首单立减10元",
                    //                 "execute_limit": 30.00,
                    //                 "deleted": 0
                    //                 },
                    //                 {
                    //                 "id": 1234,
                    //                 "type": "满减",
                    //                 "name": "满100减20元",
                    //                 "cat_id": null,
                    //                 "limit": 20.00,
                    //                 "power_days": 10,
                    //                 "start_date": null,
                    //                 "end_date": null,
                    //                 "condition": "无限制",
                    //                 "execute_limit": 100.00,
                    //                 "deleted": 0
                    //                 },
                    //                 {
                    //                 "id": 12345,
                    //                 "type": "满减",
                    //                 "name": "满100减20元(果蔬类)",
                    //                 "cat_id": 2,
                    //                 "limit": 20.00,
                    //                 "power_days": 10,
                    //                 "start_date": null,
                    //                 "end_date": null,
                    //                 "condition": "限果蔬类",
                    //                 "execute_limit": 100.00,
                    //                 "deleted": 0
                    //                 }
                    //             ]
                    // }

                    //添加长list
                    var listNode = '';
                    for(var i = 0; i < data.data.length;i++){
                        var startDateStr="";
                        var endDateStr="";
                        var powerDaysSty="";
                        var startStr = "";
                        var endStr = "";
                        var powerStr = "";
                        if(data.data[i].startDate != null && data.data[i].startDate !=""){
                            startDateStr += '<li class="list-group-item"><span>有效期_开始时间(年月日时分秒):</span><span class="store-num">'+data.data[i].startDate+'</span></li>';
                            startStr += "&%_%&startDate_有效期开始时间(年月日时分秒):^:"+data.data[i].startDate+"8";
                        };
                        if(data.data[i].endDate != null && data.data[i].endDate !=""){
                            endDateStr += '<li class="list-group-item"><span>有效期_结束时间(年月日时分秒):</span><span class="store-num">'+data.data[i].endDate+'</span></li>';
                            endStr += "&%_%&startDate_有效期开始时间(年月日时分秒):^:"+data.data[i].endDate+"8";
                        };
                        if(data.data[i].powerDays != 0){
                            console.log(data.data[i].powerDays);
                            powerDaysSty += '<li class="list-group-item"><span>有效期(/天):</span><span class="store-num">'+data.data[i].powerDays+'</span></li>';
                            powerStr += '&%_%&powerDays_有效期(/天):^:'+data.data[i].powerDays+'0';
                        };



                        listNode += '<div class="panel panel-default"><div class="panel-heading" role="tab" id="heading'+data.data[i].id+'"><h4 class="panel-title">'
                        + '<a role="button" data-toggle="collapse" style="min-width:400px;display: inline-block;" data-parent="#accordion" href="#collapse'+data.data[i].id+'" style="min-width:200px;" aria-expanded="true" aria-controls="collapse'+data.data[i].id+'">'
                        + data.data[i].name
                        + '</a>'
                        + '<button type="button" style="margin-right:20px;" class="btn btn-primary admin-btn" data-api="coupon/update?" data-toggle="modal" data-target="#exampleModal" data-whatever="修改优惠券"'
                        + 'data-list="id_优惠券ID:^:'+data.data[i].id+'0&%_%&type_类型:^:'+data.data[i].type+'0&%_%&name_名称:^:'+data.data[i].name+'0&%_%&catId_商品类别权限:^:'+data.data[i].cat_id+'7&%_%&limit_优惠券金额:^:'+data.data[i].limit+'0'+startStr+endStr+powerStr+'&%_%&condition_使用条件介绍:^:'+data.data[i].condition+'0">修改优惠券</button>'
                        + '<button type="button" style="margin-right:20px;" class="btn btn-primary couponManage" data-toggle="modal" data-target=".bs-example-modal-lg0" data-id = '+data.data[i].id+'>发放优惠券</button>'
                        + '<button type="button" class="btn btn-primary admin-btn" data-toggle="modal" data-target="#exampleModal" data-whatever="删除优惠券"'
                        + 'data-list="name_商品名称:^:'+data.data[i].name+'0&%_%&id_ID:^:'+data.data[i].id+'0">删除优惠券</button>'
                        + '</h4></div>'
                        + '<div id="collapse'+data.data[i].id+'" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">'
                        + '<div class="panel-body">'
                        + '<div class="panel-body">'
                        + '<li class="list-group-item">'
                        + '<span>类型:</span>'
                        + '<span class="store-num">'+data.data[i].type+'</span>'
                        + '</li>'
                        + '<li class="list-group-item">'
                        + '<span>名称:</span>'
                        + '<span class="store-num">'+data.data[i].name+'</span>'
                        + '</li>'
                        + '<li class="list-group-item">'
                        + '<span>商品类别权限:</span>'
                        + '<span class="store-num">'+data.data[i].catId+'</span>'
                        + '</li>'
                        + '<li class="list-group-item">'
                        + '<span>使用条件金额:</span>'
                        + '<span class="store-num">'+data.data[i].executeLimit+'</span>'
                        + '</li>'
                        + '<li class="list-group-item">'
                        + '<span>优惠券金额:</span>'
                        + '<span class="store-num">'+data.data[i].limit+'</span>'
                        + '</li>'
                        // + '<li class="list-group-item">'
                        // + '<span>有效期(/天):</span>'
                        // + '<span class="store-num">'+data.data[i].powerDays+'</span>'
                        // + '</li>'
                        // + '<li class="list-group-item">'
                        // + '<span>有效期_开始时间(年月日时分秒):</span>'
                        // + '<span class="store-num">'+data.data[i].startDate+'</span>'
                        // + '</li>'
                        +startDateStr
                        +endDateStr
                        +powerDaysSty
                        // + '<li class="list-group-item">'
                        // + '<span>有效期_结束时间(年月日时分秒):</span>'
                        // + '<span class="store-num">'+data.data[i].endDate+'</span>'
                        // + '</li>'
                        + '<li class="list-group-item">'
                        + '<span>使用条件介绍:</span>'
                        + '<span class="store-num">'+data.data[i].condition+'</span>'
                        + '</li>'
                        + '</ul></div></div></div></div>'
                    }

                    listNode += '<div class="page" style="padding-top:10px;"><ul class="page-ul"></ul><div><input type="text" style="margin:0 5px 0px 20px;width:30px;"><button>跳转</button>   &nbsp;&nbsp;&nbsp;共&nbsp;'+data.data.pages+'&nbsp;页</div></div>'

                    $('.panel-group').html(listNode);
                    $('.collapse').collapse();

                    //     $('.page ul').append("<li><</li>");

                    //     if(data.data.pages > 5){
                    //         if(data.data.pageNum < 3){
                    //           for(var i = 1 ; i < 4 ; i++){
                    //               if(data.data.pageNum == i){
                    //                 $('.page ul').append("<li data-id="+i+">"+i+"</li>").find("li").eq(i).css({"color":"red"});                                  
                    //               }else{
                    //                 $('.page ul').append("<li data-id="+i+">"+i+"</li>"); 
                    //               }                         
                    //           }
                    //           $('.page ul').append("<li data-id="+"..."+">"+"..."+"</li>");
                    //           $('.page ul').append("<li data-id="+data.data.pages+">"+data.data.pages+"</li>");
                    //         }else if(data.data.pageNum == 3){
                    //             $('.page ul').append("<li data-id="+1+">"+1+"</li>");                
                    //             $('.page ul').append("<li data-id="+2+">"+2+"</li>");
                    //             $('.page ul').append("<li data-id="+3+">"+3+"</li>").find("li").eq(3).css({"color":"red"});
                    //             $('.page ul').append("<li data-id="+4+">"+4+"</li>");
                    //             $('.page ul').append("<li data-id="+"..."+">"+"..."+"</li>");
                    //             $('.page ul').append("<li data-id="+data.data.pages+">"+data.data.pages+"</li>");            
                    //         }else if(data.data.pageNum-3 > 0){
                    //                 $('.page ul').append("<li data-id="+1+">"+1+"</li>");
                    //                 $('.page ul').append("<li data-id="+"..."+">"+"..."+"</li>");
                    //             if(data.data.pages-data.data.pageNum >= 3){
                    //                 $('.page ul').append("<li data-id="+data.data.prePage+">"+data.data.prePage+"</li>");
                    //                 $('.page ul').append("<li data-id="+data.data.pageNum+" style='color:red'>"+data.data.pageNum+"</li>");
                    //                 $('.page ul').append("<li data-id="+data.data.nextPage+">"+data.data.nextPage+"</li>");
                    //                 $('.page ul').append("<li data-id="+"..."+">"+"..."+"</li>");
                    //                 $('.page ul').append("<li data-id="+data.data.pages+">"+data.data.pages+"</li>");
                    //             }else if(data.data.pages-data.data.pageNum == 2){
                    //                 $('.page ul').append("<li data-id="+data.data.prePage+">"+data.data.prePage+"</li>");
                    //                 $('.page ul').append("<li data-id="+data.data.pageNum+" style='color:red'>"+data.data.pageNum+"</li>");
                    //                 $('.page ul').append("<li data-id="+data.data.nextPage+">"+data.data.nextPage+"</li>");
                    //                 $('.page ul').append("<li data-id="+data.data.pages+">"+data.data.pages+"</li>");
                    //             }else if(data.data.pages-data.data.pageNum == 1){
                    //                 $('.page ul').append("<li data-id="+data.data.prePage+">"+data.data.prePage+"</li>");
                    //                 $('.page ul').append("<li data-id="+data.data.pageNum+" style='color:red'>"+data.data.pageNum+"</li>");
                    //                 $('.page ul').append("<li data-id="+data.data.pages+">"+data.data.pages+"</li>");
                    //             }else if(data.data.pages-data.data.pageNum == 0){
                    //                 $('.page ul').append("<li data-id="+data.data.prePage+">"+data.data.prePage+"</li>");
                    //                 $('.page ul').append("<li data-id="+data.data.pages+" style='color:red'>"+data.data.pages+"</li>");
                    //             }
                    //         }
                    //     }else{
                    //         for(let i = 0; i<data.data.pages;i++){
                    //             var k = i + 1;
                    //             if(k == data.data.pageNum){
                    //             $('.page ul').append("<li data-id="+k+">"+k+"</li>").find("li").eq(k).css({"color":"red"});                         
                    //             }else{
                    //             $('.page ul').append("<li data-id="+k+">"+k+"</li>");                         
                    //             }
                    //         };          
                    // }
                    // $('.page ul').append("<li>></li>");


                },
                error:function(err){
                    console.log("err");
                    console.log(err);
                }
            });
        };
        findCoupon();

        //展示要发放的优惠券
        $(document).on("click",".couponManage",function(e){
            console.log($(this).data("id"));
            sessionStorage.couponId = $(this).data("id");
            $(".couponModal1").modal("show");
            // $(".coupon-ul").html();
            getAllUser();
        });

        //优惠券时间类型选择
        $(document).on("click",".select-time-one",function(e){
            $(".select-time-one").addClass("select-time");
            $(".select-time-two").removeClass("select-time");
            $(".time-one").css({"display":"block"});
            $(".time-two").css({"display":"none"});
        });
        
        //优惠券时间类型第二种类型
        $(document).on("click",".select-time-two",function(e){
            $(".select-time-two").addClass("select-time");
            $(".select-time-one").removeClass("select-time");
            $(".time-two").css({"display":"block"});
            $(".time-one").css({"display":"none"});
        });


        //选择分页
        $(document).on("click",".page-ul li",function(evev){
            console.log($(this).data("id"));
        });


        //查看优惠券
        $(".findCouponUse-1").on('click',function(e){
            $(".myhide-1").addClass("myhide");
            $(".myhide-2").removeClass("myhide");
        });

        //查询使用情况
        $(".findCouponUse-2").on('click',function(e){
            $(".myhide-2").addClass("myhide");
            $(".myhide-1").removeClass("myhide");
        });

        /*
		 *对象key值排序
		 *@paremet 对象
		 */
		function srotKeyObj(obj){
            var arr = [];
            var newobj = {};
            for(var key in obj){
                arr.push(key);
            }
            arr.sort();
            var i=0;
            for(var key in obj){
                newobj[arr[i]] = obj[arr[i]];
                i++;
            };
            return newobj;
        };
        /*
         *加密获取签名
         *@paramet 对象
         */
         function objmd5(obj){
            var str = '';
            for(var key in obj){
                str +=  key +"="+ obj[key] + "&";
            }
            var newstr = str.substr(0,str.length-1);
            var encodeStr = encodeURIComponent(newstr) + mykey;
            var sign = md5(encodeStr);
            newstr += "&sign=" + sign;
            return newstr;
        };
    })();
    </script>
</body>
</html>